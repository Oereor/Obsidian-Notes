### 微积分 (第一) 基本定理: 变上限函数

假定 $f\in R[a,b]$, 则定义变上限函数 $F(x)$ 如下: $$ F(x)=\int_{a}^{x}f(t)\,dt,\qquad x\in[a,b]. $$ 这个函数有一些性质. 

1. $F(x)$ 在 $[a,b]$ 上一致连续. *(事实上, $F$ 满足 Lipschitz 条件.)* 
2. 若 $f$ 在某点 $x_0\in(a,b)$ 连续, 则 $F$ 在该点可导, 且 $F'(x_0)=f(x_0)$.
> **证明.** 对于任意 $\varepsilon>0$, 取 $\delta>0$, 当 $|x-x_0|<\delta$ 时, 有 $$ \left|\frac{F(x)-F(x_0)}{x-x_0}-f(x_0)\right|=\left|\frac{1}{x-x_0}\int_{x_0}^{x}[f(t)-f(x_0)]\,dt\right|\leq\frac{1}{|x-x_0|}\int_{x_0}^{x}|f(t)-f(x_0)|\,dt<\varepsilon. $$ 这里利用了[[可积函数的性质#绝对可积]]的性质; 最后一步由连续性的定义得出. 证毕.

当变上限是函数时, 使用链式求导法则, 可得: $$ \frac{d}{dx}\int_{a}^{\varphi(x)}f(t)\,dt=f(\varphi(x))\varphi'(x). $$
### 微积分 (第二) 基本定理

**牛顿-莱布尼茨公式.** 设 $f\in R[a,b]$, 且存在原函数 $F(x)$, 即 $F'(x)=f(x)$ 对任意 $x\in(a,b)$ 成立. 则有 $$ \int_{a}^{b}f(x)\,dx=F(b)-F(a). $$
> **证明.** 设 $P=\{x_0,x_1,\dots,x_n\}$ 是 $[a,b]$ 上的一个分划, 即 $a=x_0<x_1<\cdots<x_n=b$. 对每个子区间 $[x_{i-1},x_i]$, 由拉格朗日中值定理, 存在 $\xi_i\in(x_{i-1},x_i)$, 使得 $$ F(x_i)-F(x_{i-1})=F'(\xi_i)(x_i-x_{i-1})=f(\xi_i)(x_i-x_{i-1}). $$ 将这些式子相加, 得到 $$ F(b)-F(a)=\sum_{i=1}^{n}f(\xi_i)(x_i-x_{i-1}). $$ 由于 $f$ 可积, 故当 $\|P\|\to 0$ 时, 上式右端的和趋于 $\displaystyle\int_{a}^{b}f(x)\,dx$. 因此, $$ F(b)-F(a)=\int_{a}^{b}f(x)\,dx. $$ 证毕.

定理的条件可以适当减弱. 
1. 若在 $(a,b)$ 上除了有限个点之外均有 $F'(x)=f(x)$, 结论仍然成立. 
2. 若 $F$ 在 $[a,b]$ 上分段连续, 且间断点为 $a=x_0<x_1<\cdots<x_n=b$ 为间断点, 除有限个点外均有 $F'(x)=f(x)$, 则 $$ \int_{a}^{b}f(x)\,dx=\sum_{i=1}^{n}[F(x_i^-)-F(x_{i-1}^+)]. $$

**例题.** 求极限 $\displaystyle\lim_{n\to\infty}\left( \frac{n}{n^2+1^2}+\frac{n}{n^2+2^2}+\cdots+\frac{n}{n^2+n^2} \right)$. 

> **解.** $$\begin{align*}
\lim_{n\to\infty}\left( \frac{n}{n^2+1^2}+\frac{n}{n^2+2^2}+\cdots+\frac{n}{n^2+n^2} \right)&=\lim_{n\to\infty}\sum_{k=1}^{n}\frac{1}{1+\left(\frac{k}{n}\right)^2}\cdot\frac{1}{n}\\
&=\int_{0}^{1}\frac{1}{1+x^2}\,dx\\
&=\arctan x\bigg|_{0}^{1}\\
&=\frac{\pi}{4}.
\end{align*}$$ 要点在于联系 Riemann 和. 

同理, 可以求 $\displaystyle\lim_{n\to\infty}\frac{1}{n}\left( \sin\frac{1}{n}\pi+\sin\frac{2}{n}\pi+\cdots+\sin\frac{n-1}{n}\pi \right)$. 